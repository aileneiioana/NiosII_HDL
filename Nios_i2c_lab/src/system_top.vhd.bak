library IEEE;
use IEEE.std_logic_1164.all;

entity system_top is
    port(
        clk         : in std_logic;
        arst_n      : in std_logic;
        sw          : in std_logic_vector (9 downto 0);
        led         : out std_logic_vector (9 downto 0);
        ext_ena_n   : in std_logic
    );
end entity;

architecture top_level of system_top is

    component nios2_system is
		port (
			clk_clk                                  : in  std_logic                    := 'X';             -- clk
			sw_pio_external_connection_export        : in  std_logic_vector(9 downto 0) := (others => 'X'); -- export
			led_pio_external_connection_export       : out std_logic_vector(9 downto 0);                    -- export
			interrupt_pio_external_connection_export : in  std_logic                    := 'X';             -- export
			reset_reset_n                            : in  std_logic                    := 'X'              -- reset_n
		);
	end component nios2_system;
    begin

        synch : process(clk)
        begin
            if rising_edge(clk) then
                irq_n_r <= ext_ena_n;
                irq_n_rr <= irq_n_r;
            end if;
        end process;

        u0 : component nios2_system
		port map (
			clk_clk                                  => clk,                                                     
			sw_pio_external_connection_export        => arst_n,        
			led_pio_external_connection_export       => sw,      
			interrupt_pio_external_connection_export => led, 
			reset_reset_n                            => irq_n_rr                         
		);

end architecture;